/*! 
 * Bookmarklet to change the speed (or playback rate) of YouTube Videos
 * but it should work on any other website with HTML5 video tags
 * 
 * Copyright(c) 2014 Chris Cinelli 
 * MIT Licensed. 
 * 
 * @author: Chris Cinelli
 * 
 * http://github.com/chriscinelli/youtube-video-speed-change-bookmarlet
 * 
 */
(function(h,k){function b(a,b){return(b?b:h).querySelectorAll(a)}function p(a){try{return a.contentWindow?a.contentWindow.document:a.contentDocument}catch(b){return console.log("iframe document is not reachable: "+a.src),!1}}function l(){try{return"localStorage"in k&&null!==k.localStorage}catch(a){return!1}}function f(){var a=c.value;e.playbackRate=a/100;m=l()?localStorage[g]=a:a}var g="_yvscb_memory",m=100,e=b("video")[0];if(!e){var d=b("iframe");if(0<d.length)for(var a=0;a<d.length;a++){var n=p(d[a]); if(n&&(e=b("video",n)[0]))break}}if(e)if(e.playbackRate)if(d=b("body")[0],a=b("#_yvscb_control")[0])d.removeChild(a),e.playbackRate=1;else{a=h.createElement("div");a.setAttribute("id","_yvscb_control");a.innerHTML='<div style="font:12px monospace;position:fixed;left:2px;top:2px;z-index:2139999999;box-shadow:1px 1px 4px #666;background-color:#eee;border:1px solid #333;border-radius:3px;margin:2px;box-sizing:border-box;;padding:2px"><button class="plus" style=";background-color:#eee;border:1px solid #333;border-radius:3px;margin:2px;box-sizing:border-box;;padding:2px 3px">+</button><input type="text" style="border:0;padding:0;background-color:#eee;height:26px;margin:2px 0;width:24px;box-sizing:border-box;">%<button class="minus" style=";background-color:#eee;border:1px solid #333;border-radius:3px;margin:2px;box-sizing:border-box;;padding:2px 3px">-</button></div>'; d.appendChild(a);var c=b("#_yvscb_control input")[0];c.onchange=f;b("#_yvscb_control .minus")[0].onclick=function(){c.value=parseInt(c.value)-5;f()};b("#_yvscb_control .plus")[0].onclick=function(){c.value=parseInt(c.value)+5;f()};d=c;a=l()&&localStorage[g]?localStorage[g]:m;d.value=a;e.playbackRate=c.value/100}else alert("This browser does not support changes of playback rate on HTML5 videos! Try Google Chrome!");else alert("This page does not have any HTML5 videos or they are not reachable (this does not work with Flash videos)!")})(document, window);